<!--
File:       recipe_view.html
Authors:    Joshua Coe, Scott McClure, Danita Hodges
Purpose:    Search page for recipes
Version:    1.3
Version Notes:
            1.0 - JC - Initial creation, query
            1.1 - SM - Added conversion function and form
            1.3 - DH - Formal view
-->

{% extends 'reciplan/base.html'%}
{% block content %}

<style>
  #block{
    padding-left: 3%;
  }
</style>


<title>{{ recipe.title }}</title>

<div class="container" id="block">
  <div class="row">
    <div class="col-md-6">
      <div class="row">
        <div class="col-md-12">
          <img src="/media/{{ recipe.image }}" width="500px"/>
        </div>
      </div>
    </div>
    <div class="col-md-6">
      <div class="row">
        <div class="col-md-12">
          <h1>{{ recipe.title }}</h1>
        </div>
      </div>
      <div class="row">
        <div class="col-md-12">
          <hr>
          {{ recipe.description }}
          <hr>
        </div>
      </div>
      <div class="row">
        <div class="col-md-4 d-flex flex-row ">
          <h4>Original Yield: {{recipe.o_yield}}</h4>
        </div>
        <div class="col-md-8 d-flex flex-row ">
          <form method="POST" id="chyield">
            {% csrf_token%}
            <div class="form-row ">
              <div class="form-group col-md-12">
                
                <label for="targetYield"><h4>Target Yield:</h4></label>
                <input id="targetYield" name="targetYield" type="text" maxlength="4" size="4">
                <button type="submit" class="btn btn-warning">Update</button>
              </div>
            </div>
          </form>
        </div>
      </div>
      <div class="row">
        <hr>
      </div>
      <div class="row">
        <div class="col-md-6 d-flex flex-row justify-content-center">
          <button class="btn btn-warning" type="submit">Convert to Imperial</button>
        </div>
        <div class="col-md-6 d-flex flex-row justify-content-center">

          <button class="btn btn-warning" type="submit">Convert to Metric</button>
        </div>
      </div>
    </div>
  </div>
  <div class="row">
    <div class="col-md-12">
      <table class="table">
        <thead>
          <tr>
            <th scope="col">Org Amt</th>
            <th scope="col">UOM</th>
            <th scope="col">Target Amt</th>
            <th scope="col">UOM</th>
            <th scope="col">Ingredient</th>
            <th scope="col"><!--Add to Cart--></th>
          </tr>
        </thead>
        <tbody>
          {% for ingredient in ingredients %}
          <tr>
            <td>{{ ingredient.amt }}</td>
            <td>{{ ingredient.unit_of_measure }}</td>
            <td>{{ ingredient.amt }}</td>
            <td>{{ ingredient.unit_of_measure }}</td>
            <td>{{ ingredient.name }}</td>
            <th scope="col">
              <button id="" class="btn cart btn-success">Add to Cart</button>
            </th>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
    <div class="col-md-12">
      <h2>Directions</h2>
      {{ recipe.directions }}
    </div>
  </div>
</div>






<table>
  <tr>
    <th>Org<br>Amt</th>
    <th>UOM</th>
    <th>Ingredient</th>
    <th>Add to Shopping List</th>
  </tr>
  
  {% for targ in targs %}
  <tr>
    <td>{{ targ.amt }}</td>
    <td>{{ targ.unit_of_measure }}</td>
    </tr>
  {% endfor %}

  {% for ingredient in ingredients %}
  <tr>
    <td>{{ ingredient.amt }}</td>
    <td>{{ ingredient.unit_of_measure }}</td>
    <td>{{ ingredient.name }}</td>
    <td> <input method="POST" type="checkbox" name="is_checked"></td> <!--This feeds into cart.views -->
  </tr>
    {% endfor %}

  
  <tr>{{ recipe.description }} </tr>
</table>
<table>
  <tr>
    <td> {{ recipe.directions }} </td>
  </tr>
</table>

<form method="POST">
  {% csrf_token %}
  <label for="convert_yield">Adjust yield:</label>
  <input type="number" id="convert_yield" name="convert_y" min="1" max="9999" value="1">
  <input type="radio" id="metric" name ="unit_conv" value="Metric">
  <label for="imperial">Metric</label><br>
  <input type="radio" id="imperial" name="unit_conv" value="Imperial" checked> 
  <label for="imperial">Imperial</label><br>
  <button type='submit'>Apply</button> 
</form> 

{% endblock %}